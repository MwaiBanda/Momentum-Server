import{j as e,r as c,a as $}from"./react-bc4662ae.js";import{c as z}from"./react-dom-ce85487d.js";import{Q,u as T,a as D,b as H,d as K}from"./react-query-525609e8.js";import{c as U}from"./react-router-dom-13eb691c.js";import{N as u,M as f,B as p,L as m,T as j,a as F,C as B}from"./flowbite-react-c13e4536.js";import"./react-indiana-drag-scroll-b2642470.js";import"./firebase-664b9db3.js";import{i as Y,g as G,s as W}from"./@firebase-37cbf9c2.js";import{u as _,a as J,R as V}from"./react-router-b80b3d45.js";import{a as b}from"./axios-4a70c6fc.js";import"./scheduler-765c72db.js";import"./@babel-a3f164e7.js";import"./@remix-run-0093eeff.js";import"./tailwind-merge-1166cefb.js";import"./react-icons-a8460db2.js";import"./@floating-ui-79711567.js";import"./aria-hidden-318acb9e.js";import"./tabbable-6ab97b54.js";import"./idb-81bdbf9b.js";import"./tslib-6635c9de.js";(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const r of s)if(r.type==="childList")for(const a of r.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&i(a)}).observe(document,{childList:!0,subtree:!0});function n(s){const r={};return s.integrity&&(r.integrity=s.integrity),s.referrerPolicy&&(r.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?r.credentials="include":s.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function i(s){if(s.ep)return;s.ep=!0;const r=n(s);fetch(s.href,r)}})();const X=new Q,Z="67a78d53-d47c-4981-b3e4-1843b8591904",N="/notifications",w="/users",ee="/dashboard",k="/messages",R="/payments",te={apiKey:"AIzaSyC59xS5P27qzafvucTLTPkAm6gwrWRfMQ8",authDomain:"momentum-ministry.firebaseapp.com",projectId:"momentum-ministry",storageBucket:"momentum-ministry.appspot.com",messagingSenderId:"649626638654",appId:"1:649626638654:web:2c65617d5ee8ed16cab46f",measurementId:"G-F5RPPG148R"},se=Y(te),S=G(se);function g(){let t=_();return e.jsxs(u,{fluid:!0,rounded:!0,className:"w-full",children:[e.jsxs(u.Brand,{href:"/dashboard",children:[e.jsx("img",{src:"assets/logo.png",className:"mr-3 h-6 sm:h-9",alt:"Momentum Logo"}),e.jsx("span",{className:"self-center whitespace-nowrap text-xl font-bold border-b border-gray-100 text-gray-700 hover:bg-gray-50 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white md:border-0 md:hover:bg-transparent md:hover:text-cyan-700 md:dark:hover:bg-transparent md:dark:hover:text-white",children:"Momentum Dashboard"})]}),e.jsx(u.Toggle,{}),e.jsxs(u.Collapse,{children:[e.jsx(u.Link,{className:"hover:text-momentum-orange active:text-momentum-orange",href:k,active:k===t.pathname,children:"Messages"}),e.jsx(u.Link,{href:N,active:N===t.pathname,children:"Notifications"}),e.jsx(u.Link,{href:R,active:R===t.pathname,children:"Payments"}),e.jsx(u.Link,{href:w,active:w===t.pathname,children:"Users"}),e.jsx(u.Link,{className:"cursor-pointer",onClick:()=>{S.signOut().then(()=>{alert("Signed out")}).catch(o=>{alert(o)})},children:"Sign Out"})]})]})}const re=()=>{const t=J();return c.useEffect(()=>{t("/messages")},[]),e.jsx("div",{className:"w-full",children:e.jsx(g,{})})};function ae({openModal:t,setOpenModal:o}){const[n,i]=c.useState([]),s=c.useRef(null),r=c.useRef(null),a=c.useRef(null),l=c.useRef(null),v=c.useRef(null),q=T(d=>b.post("/api/v1/messages",d),{onSuccess:()=>{alert("Message posted successfully")}});return e.jsxs(f,{show:t,size:"md",popup:!0,onClose:()=>o(!1),initialFocus:s,children:[e.jsx(f.Header,{}),e.jsx(f.Body,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsx("h3",{className:"text-xl font-medium text-gray-900 dark:text-white",children:"Add a Message"}),e.jsx(x,{reference:s,title:"Title",placeholder:"Enter the title of the message",id:"title"}),e.jsx(x,{reference:r,title:"Series",placeholder:"Enter the series of the message",id:"series"}),e.jsx(x,{reference:a,title:"Preacher",placeholder:"Enter the name of the preacher",id:"preacher"}),e.jsx(x,{reference:v,title:"Date",placeholder:"Enter the display date of the message",id:"date"}),e.jsx(x,{reference:l,title:"Image",placeholder:"Enter the image cover url of the message",id:"image"}),n.map((d,h)=>{switch(d.type){case 0:return e.jsx(O,{reference:d.area,title:"Add header",placeholder:"Enter the header of the passage",id:`header${h+1}`});case 1:return e.jsxs("div",{children:[e.jsx(x,{reference:d.text,title:"Add verse",placeholder:"Enter the verse of the passage",id:`verse${h+1}`}),e.jsx(O,{reference:d.area,title:"Add message",placeholder:"Enter the message of the passage",id:`message${h+1}`})]})}}),e.jsxs("div",{className:"w-full flex justify-between",children:[e.jsx(p,{onClick:()=>{var d,h,M,A,C;q.mutate({title:((d=s.current)==null?void 0:d.value)??"",series:((h=r.current)==null?void 0:h.value)??"",preacher:((M=a.current)==null?void 0:M.value)??"",thumbnail:((A=l.current)==null?void 0:A.value)??"",date:((C=v.current)==null?void 0:C.value)??"",passages:n.map((y,E)=>{var I,L,P;switch(y.type){case 0:return{header:((I=y.area.current)==null?void 0:I.value)??"",verse:null,message:null,type:"header",order:E};case 1:return{header:null,verse:((L=y.text.current)==null?void 0:L.value)??"",message:((P=y.area.current)==null?void 0:P.value)??"",type:"message",order:E}}})}),o(!1)},children:"Submit"}),e.jsxs("div",{className:"flex",children:[e.jsx(p,{onClick:()=>{i([...n,{type:0,text:null,area:c.createRef()}]),console.log(n)},children:"Add header"}),e.jsx(p,{className:"ml-1",onClick:()=>{i([...n,{type:1,text:c.createRef(),area:c.createRef()}]),console.log(n)},children:"Add message"})]})]})]})})]})}function x({reference:t,title:o,placeholder:n,id:i}){return e.jsxs("div",{children:[e.jsx("div",{className:"mb-2 block",children:e.jsx(m,{htmlFor:i,value:o})}),e.jsx(j,{id:i,ref:t,placeholder:n,required:!0})]})}function O({reference:t,title:o,placeholder:n,id:i}){return e.jsxs("div",{children:[e.jsx("div",{className:"mb-2 block",children:e.jsx(m,{htmlFor:i,value:o})}),e.jsx(F,{id:i,ref:t,placeholder:n,required:!0})]})}function ne({openModal:t,setOpenModal:o}){const n=c.useRef(null),i=c.useRef(null);return e.jsxs(f,{show:t,size:"md",popup:!0,onClose:()=>o(!1),initialFocus:n,children:[e.jsx(f.Header,{}),e.jsx(f.Body,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsx("h3",{className:"text-xl font-medium text-gray-900 dark:text-white",children:"Sign in to your account"}),e.jsxs("div",{children:[e.jsx("div",{className:"mb-2 block",children:e.jsx(m,{htmlFor:"email",value:"Your email"})}),e.jsx(j,{id:"email",ref:n,placeholder:"name@company.com",required:!0})]}),e.jsxs("div",{children:[e.jsx("div",{className:"mb-2 block",children:e.jsx(m,{htmlFor:"password",value:"Your password"})}),e.jsx(j,{id:"password",ref:i,type:"password",required:!0})]}),e.jsx("div",{className:"w-full",children:e.jsx(p,{onClick:()=>{var s,r;W(S,(s=n.current)==null?void 0:s.value,(r=i.current)==null?void 0:r.value).then(a=>{const l=a.user;o(!1),alert(`Signed in as ${l==null?void 0:l.email}`)}).catch(a=>{const l=a.code,v=a.message;alert(`Error: ${l} ${v}`)})},children:"Log in to your account"})})]})})]})}function oe({message:t}){return e.jsx(B,{className:"max-w-lg mt-6",renderImage:()=>e.jsx("img",{crossOrigin:"anonymous",src:t.thumbnail,title:"source: imgur.com"}),horizontal:!1,children:e.jsxs("div",{className:"min-w-96 flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h5",{className:"text-2xl font-bold tracking-tight text-gray-900 dark:text-white",children:t.preacher}),e.jsx("p",{className:"font-normal text-gray-700 dark:text-gray-400",children:t.date}),e.jsx("p",{className:"font-normal text-gray-700 dark:text-gray-400",children:t.series}),e.jsx("p",{className:"font-normal text-gray-700 dark:text-gray-400",children:t.title})]}),e.jsx("button",{className:"bg-momentum-orange hover:bg-momentum-orange text-white font-bold py-2 px-4 rounded max-h-10",children:"Modify"})]})})}const ie=()=>{const{data:t,isLoading:o}=D({queryKey:["message"],queryFn:async()=>{const{data:a}=await b.get("/api/v1/messages/admin");return a}}),[n,i]=c.useState(!1),[s,r]=c.useState(!1);return o?e.jsx("div",{children:"Loading..."}):e.jsxs("main",{className:"w-full h-screen",children:[e.jsx(g,{}),e.jsx("div",{className:"w-full flex flex-col justify-normal items-end",children:e.jsx("button",{className:"bg-momentum-orange hover:bg-momentum-orange text-white font-bold py-2 px-4 rounded max-h-10",onClick:()=>{var a;((a=S.currentUser)==null?void 0:a.uid)===void 0?i(!0):r(!0)},children:"Add Message"})}),e.jsx("div",{className:"w-full h-screen flex flex-col justify-normal items-center",children:t.data.map(a=>e.jsx("div",{children:e.jsx(oe,{message:a})},a.id))}),e.jsx(ne,{openModal:n,setOpenModal:i}),e.jsx(ae,{openModal:s,setOpenModal:r})]})};function le(){const[t,o]=c.useState(""),[n,i]=c.useState(""),[s,r]=c.useState(""),a=T(l=>b.post("/api/v1/notifications",l),{onSuccess:()=>{alert("Notification sent successfully")}});return e.jsx(B,{className:"min-w-[23%]",children:e.jsxs("form",{className:"flex flex-col gap-4",children:[e.jsx("h5",{className:"mb-2 text-3xl font-bold text-gray-900 dark:text-white",children:"Reach all users anytime"}),e.jsx("p",{className:"mb-5 text-base text-gray-500 dark:text-gray-400 sm:text-lg",children:"Notify users on iOS & Android on upcoming events and lastest updates."}),e.jsxs("div",{children:[e.jsx("div",{className:"mb-2 block",children:e.jsx(m,{htmlFor:"title",value:"Title"})}),e.jsx(j,{id:"title",type:"text",onChange:l=>{o(l.target.value)}})]}),e.jsxs("div",{children:[e.jsx("div",{className:"mb-2 block",children:e.jsx(m,{htmlFor:"body",value:"Body"})}),e.jsx(F,{id:"body",rows:5,onChange:l=>{i(l.target.value)}})]}),e.jsxs("div",{children:[e.jsx("div",{className:"mb-2 block",children:e.jsx(m,{htmlFor:"topic",value:"Topic"})}),e.jsx(j,{id:"topic",type:"text",onChange:l=>{r(l.target.value)}})]}),e.jsx(p,{className:"bg-momentum-orange hover:bg-momentum-orange  enabled:hover:bg-momentum-orange",type:"submit",onClick:l=>{l.preventDefault(),a.mutate({title:t,body:n,topic:s})},children:"Send Notification"})]})})}const ce=()=>e.jsxs("main",{className:"w-full h-screen",children:[e.jsx(g,{}),e.jsx("div",{className:"w-full h-screen flex justify-center items-center",children:e.jsx(le,{})})]}),de=()=>e.jsx("div",{className:"w-full",children:e.jsx(g,{})}),ue=()=>e.jsx("div",{className:"w-full",children:e.jsx(g,{})}),me=U([{path:k,element:e.jsx(ie,{})},{path:ee,element:e.jsx(re,{})},{path:N,element:e.jsx(ce,{})},{path:R,element:e.jsx(de,{})},{path:w,element:e.jsx(ue,{})}]);b.interceptors.request.use(t=>(t.headers.Authorization=`Bearer ${Z}`,t),t=>Promise.reject(t));function he(){return e.jsxs(H,{client:X,children:[e.jsx(V,{router:me}),e.jsx(K.ReactQueryDevtools,{initialIsOpen:!1})]})}z.createRoot(document.getElementById("root")).render(e.jsx($.StrictMode,{children:e.jsx(he,{})}));
